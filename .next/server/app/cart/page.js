(()=>{var e={};e.id=4005,e.ids=[4005],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10588:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(30152).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11602:e=>{"use strict";e.exports=import("@clerk/backend/jwt")},17275:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var s=r(60563),a=r(75770),n=r(60554),i="horizontal",o=["horizontal","vertical"],l=s.forwardRef((e,t)=>{var r;let{decorative:s,orientation:l=i,...d}=e,c=(r=l,o.includes(r))?l:i;return(0,n.jsx)(a.sG.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});l.displayName="Separator";var d=l},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21532:e=>{"use strict";e.exports=import("@clerk/backend")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37681:(e,t,r)=>{"use strict";r.d(t,{Separator:()=>i});var s=r(60554);r(60563);var a=r(17275),n=r(83481);function i({className:e,orientation:t="horizontal",decorative:r=!0,...i}){return(0,s.jsx)(a.b,{"data-slot":"separator-root",decorative:r,orientation:t,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...i})}},41064:(e,t,r)=>{Promise.resolve().then(r.bind(r,56324))},45973:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(40356).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Russell\\\\Downloads\\\\AI-Projects\\\\Mesza\\\\mesza-app\\\\app\\\\cart\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Russell\\Downloads\\AI-Projects\\Mesza\\mesza-app\\app\\cart\\page.tsx","default")},48528:e=>{"use strict";e.exports=import("@clerk/backend/internal")},50643:e=>{"use strict";e.exports=require("node:fs")},54216:(e,t,r)=>{Promise.resolve().then(r.bind(r,45973))},56324:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(60554),a=r(60563),n=r(47041),i=r(55990),o=r.n(i),l=r(10588),d=r(86802),c=r(87681),p=r(71726),u=r(75410),x=r(75236),m=r(37681),h=r(70400),f=r(43534),j=r(84477),v=r(18844);function g(){let[e,t]=(0,a.useState)([]),r=(0,f.A)(e=>e.dispatch),{createOrder:i}=(0,j.x)(),g=(0,v.useRouter)(),y=s=>{r({type:"increment"});let a=[...e];a[s].quantity+=1,t(a),localStorage.setItem("cart",JSON.stringify(a))},b=s=>{r({type:"decrement"});let a=[...e];if(a[s].quantity-=1,a[s].quantity<1)return void w(s);t(a),localStorage.setItem("cart",JSON.stringify(a))},N=(r,s)=>{if(s<1)return void w(r);let a=[...e];a[r].quantity=s,t(a),localStorage.setItem("cart",JSON.stringify(a))},w=s=>{let a=e.filter((e,t)=>t!==s);r({type:"decrement"}),t(a),localStorage.setItem("cart",JSON.stringify(a))},k=()=>{t([]),r({type:"reset"}),localStorage.removeItem("cart")},P=e.reduce((e,t)=>e+t.price*t.quantity,0),C=async()=>{try{let t=await i(e,P);k(),g.push(`/shipping/${t.orderId}`)}catch(e){console.error(e)}};return(0,s.jsxs)("div",{className:"flex min-h-[100dvh] flex-col",children:[(0,s.jsx)(u.SiteHeader,{}),(0,s.jsx)("main",{className:"flex-1",children:(0,s.jsx)("section",{className:"w-full py-12 md:py-24 lg:py-32",children:(0,s.jsxs)("div",{className:"px-4 md:px-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Your Cart"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Review and manage your items before checkout."})]}),(0,s.jsxs)("div",{className:"grid gap-10 lg:grid-cols-[1fr_400px]",children:[(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"hidden md:grid grid-cols-[2fr_1fr_1fr_auto] gap-6 text-sm text-muted-foreground font-medium py-2 border-b",children:[(0,s.jsx)("div",{children:"Product"}),(0,s.jsx)("div",{children:"Price"}),(0,s.jsx)("div",{children:"Quantity"})]}),0===e.length&&(0,s.jsx)("div",{className:"py-8 text-center text-muted-foreground",children:"Your cart is empty."}),e.map((e,t)=>(0,s.jsxs)("div",{className:"grid md:grid-cols-[2fr_1fr_1fr_auto] gap-4 md:gap-6 py-4 border-b",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 relative rounded-md overflow-hidden flex-shrink-0",children:(0,s.jsx)(n.default,{src:e.image||"/placeholder.svg?height=80&width=80",alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:e.name}),e.selectedOptions&&Object.entries(e.selectedOptions).map(([e,t])=>(0,s.jsx)("p",{children:(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e,": ",String(t)]})},e))]})]}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("span",{className:"font-medium",children:["$",e.price]})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:"flex h-8 w-8 items-center justify-center rounded-l-md border",onClick:()=>b(t),children:(0,s.jsx)(l.A,{className:"h-3 w-3"})}),(0,s.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:e=>N(t,Number.parseInt(e.target.value)||1),className:"h-8 w-12 border-y text-center text-sm [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none"}),(0,s.jsx)("button",{className:"flex h-8 w-8 items-center justify-center rounded-r-md border",onClick:()=>y(t),children:(0,s.jsx)(d.A,{className:"h-3 w-3"})})]})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("button",{className:"ml-2 text-muted-foreground hover:text-destructive",onClick:()=>w(t),children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Remove item"})]})})]},t))]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-between",children:[(0,s.jsx)(p.$,{variant:"outline",asChild:!0,children:(0,s.jsx)(o(),{href:"/products",children:"Continue Shopping"})}),(0,s.jsxs)(p.$,{variant:"ghost",className:"gap-2",onClick:k,children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),"Clear Cart"]})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)(h.Zp,{children:[(0,s.jsxs)(h.Wu,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,s.jsxs)("span",{children:["$",P.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Shipping"}),(0,s.jsx)("span",{children:"Free"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Tax"}),(0,s.jsxs)("span",{children:["$",(.1*P).toFixed(2)]})]}),(0,s.jsx)(m.Separator,{}),(0,s.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["$",(1.1*P).toFixed(2)]})]})]})]}),(0,s.jsx)(h.wL,{className:"px-6 pb-6 pt-0",children:(0,s.jsx)(p.$,{className:"w-full",size:"lg",disabled:0===e.length,onClick:C,children:"Proceed to Checkout"})})]})})]})]})})}),(0,s.jsx)(x.D,{})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69953:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(97448),a=r(81303),n=r(23375),i=r.n(n),o=r(37440),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,45973)),"C:\\Users\\Russell\\Downloads\\AI-Projects\\Mesza\\mesza-app\\app\\cart\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,48482))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,49510)),"C:\\Users\\Russell\\Downloads\\AI-Projects\\Mesza\\mesza-app\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,97790)),"C:\\Users\\Russell\\Downloads\\AI-Projects\\Mesza\\mesza-app\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,26166)),"C:\\Users\\Russell\\Downloads\\AI-Projects\\Mesza\\mesza-app\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,37056,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,12433,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,48482))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Russell\\Downloads\\AI-Projects\\Mesza\\mesza-app\\app\\cart\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},70400:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>c});var s=r(60554);r(60563);var a=r(83481);function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function o({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...t})}function c({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center px-6 [.border-t]:pt-6",e),...t})}},76760:e=>{"use strict";e.exports=require("node:path")},79551:e=>{"use strict";e.exports=require("url")},84477:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});let s=(0,r(89490).v)(e=>({cart:[],setCart:t=>e({cart:t}),clearCart:()=>e({cart:[]}),createOrder:async(e,t)=>{try{let r=await fetch("/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:e,subTotal:t})});if(!r.ok)throw Error("Failed to create order");return await r.json()}catch(e){throw console.error(e),e}},getOrderById:async e=>{console.log("Fetching order with ID:",e);try{let t=await fetch(`/api/order/${e}`);if(!t.ok){let e=await t.json().catch(()=>null);throw console.error("Order fetch failed:",t.status,e),Error(`Failed to fetch order: ${t.statusText}`)}return await t.json()}catch(e){return console.error("Error in getOrderById:",e),null}}}))},86802:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(30152).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},87681:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(30152).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[6862,2623,8500,6785,5368,4483],()=>r(69953));module.exports=s})();